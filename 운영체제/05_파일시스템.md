# 파일시스템

0과1의 데이터를 비트로 관리하면 오버헤드가 크기때문에 블록 단위로 관리하기 위해 (보통 4KB) 블록마다 고유번호를 부여해서 관리한다.  

이 블록들의 고유번호를 사용자가 관리하기 어렵기 때문에 파일 단위로 관리하게 한것이 파일 시스템이다.  

파일을 저장할때, 가능한 연속적인 공간에 파일을 저장하는것이 좋다.  

주로 블록을 링크드 리스트로 연결한 블록체인 방법이나  

각 블록에 대한 위치정보를 기록해 한번에 끝 블록을 찾을 수 있도록 하는 인덱스 블록 방법을 사용한다.  

윈도우는 블록 위치를 FAT라는 자료구조에 기록한다. (FAT, FAT32, NTFS)    

리눅스는 인덱스 블록기법의 일종인 incode 방식을 사용한다. (ext2, ext3, ext4)  

<br>

## :arrow_forward: 파일 시스템과 시스템 콜

동일한 시스템콜을 사용하여 다양한 파일 시스템을 지원 가능하게 구현한다.  

read/ write 시스템콜 호출시, 각 기기 및 파일 시스템에 따라 실질적인 처리를 담당하는 함수를 구현한다.  

하지만 실제 파일을 어떻게 저장할지는 다를 수 있다.  

( 리눅스는 ex4 외 NTFS, FAT32 파일시스템을 지원한다 )  

<br>

## :arrow_forward: inode 방식 파일 시스템

파일시스템은 기본적으로 세가지 구조로 나눠져 있다.  

1. 수퍼 블록 : 파일 시스템 정보
2. 아이노드 블록 : 파일 상세 정보
3. 데이터 블록 : 실제 데이터

파일은 incode 고유값과 자료구조에 의해 주요 정보를 관리하고  

파일 시스템에서는 inode 기반으로 파일에 접근하고 inode 기반으로 메타 데이터를 저장한다.  

inode 기반 메타데이터에는 파일권한, 소유자정보, 파일사이즈, 생성시간, 데이터 저장위치 등의 정보가 담겨있다.  

<br>

## :arrow_forward: 가상 파일 시스템 (Virtual File System)  

네트워크 등 다양한 기기도 동일한 파일 시스템 인터페이스를 통해 관리할 수 있다.  

예를들어 read/write 시스템콜 사용, 각 기기별 read_sepc/write_spec 코드를 운영체제 내부에 구현한다.  


참고로 리눅스(유닉스) 운영체제의 파일시스템은 모든것은 파일이라는 철학을 따른다.  
- 모든 인터렉션은 파일을 읽고, 쓰는 것처럼 이뤄져 있다.
- 마우스, 키보드와 같은 모든 디바이스 관련 기술도 파일과 같이 다뤄진다.
- **모든 자원에 대한 추상화 인터페이스로 파일 인터페이스를 활용한다.** 



